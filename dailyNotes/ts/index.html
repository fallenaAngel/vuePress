<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>什么是TS | Ding&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/vuePress/logo.jpg">
    <meta name="description" content="我的个人网站">
    
    <link rel="preload" href="/vuePress/assets/css/0.styles.01e747de.css" as="style"><link rel="preload" href="/vuePress/assets/js/app.6d60d073.js" as="script"><link rel="preload" href="/vuePress/assets/js/2.b3f14533.js" as="script"><link rel="preload" href="/vuePress/assets/js/1.9a56ce6b.js" as="script"><link rel="preload" href="/vuePress/assets/js/29.932303ce.js" as="script"><link rel="prefetch" href="/vuePress/assets/js/10.d1952a8c.js"><link rel="prefetch" href="/vuePress/assets/js/11.36f1529d.js"><link rel="prefetch" href="/vuePress/assets/js/12.455ee435.js"><link rel="prefetch" href="/vuePress/assets/js/13.1e7a4b73.js"><link rel="prefetch" href="/vuePress/assets/js/14.2772fea2.js"><link rel="prefetch" href="/vuePress/assets/js/15.6d2dfa11.js"><link rel="prefetch" href="/vuePress/assets/js/16.0824e914.js"><link rel="prefetch" href="/vuePress/assets/js/17.2f70f581.js"><link rel="prefetch" href="/vuePress/assets/js/18.79d107ee.js"><link rel="prefetch" href="/vuePress/assets/js/19.d6620149.js"><link rel="prefetch" href="/vuePress/assets/js/20.7c8f927d.js"><link rel="prefetch" href="/vuePress/assets/js/21.fbb3d48e.js"><link rel="prefetch" href="/vuePress/assets/js/22.988f3bd4.js"><link rel="prefetch" href="/vuePress/assets/js/23.fcea1c3a.js"><link rel="prefetch" href="/vuePress/assets/js/24.c6be4987.js"><link rel="prefetch" href="/vuePress/assets/js/25.8b011566.js"><link rel="prefetch" href="/vuePress/assets/js/26.cc47e4bd.js"><link rel="prefetch" href="/vuePress/assets/js/27.60fa7ec5.js"><link rel="prefetch" href="/vuePress/assets/js/28.f16e7951.js"><link rel="prefetch" href="/vuePress/assets/js/3.508c26ee.js"><link rel="prefetch" href="/vuePress/assets/js/30.7e254814.js"><link rel="prefetch" href="/vuePress/assets/js/31.1eac964b.js"><link rel="prefetch" href="/vuePress/assets/js/4.028344d6.js"><link rel="prefetch" href="/vuePress/assets/js/5.35b2dbd2.js"><link rel="prefetch" href="/vuePress/assets/js/6.eba97de9.js"><link rel="prefetch" href="/vuePress/assets/js/7.d600773b.js"><link rel="prefetch" href="/vuePress/assets/js/vendors~docsearch.33b2b47d.js">
    <link rel="stylesheet" href="/vuePress/assets/css/0.styles.01e747de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuePress/" class="home-link router-link-active"><!----> <span class="site-name">Ding's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuePress/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常" class="dropdown-title"><span class="title">日常</span> <span class="arrow down"></span></button> <button type="button" aria-label="日常" class="mobile-dropdown-title"><span class="title">日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/problemRecords.html" class="nav-link">
  日常问题记录
</a></li><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/ts/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/toolWebsite.html" class="nav-link">
  工具网站合集
</a></li><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/InterviewTheory.html" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/lifeTips.html" class="nav-link">
  生活
</a></li></ul></div></div><div class="nav-item"><a href="/vuePress/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="https://blog.csdn.net/weixin_43869192" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/fallenaAngel" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuePress/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常" class="dropdown-title"><span class="title">日常</span> <span class="arrow down"></span></button> <button type="button" aria-label="日常" class="mobile-dropdown-title"><span class="title">日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/problemRecords.html" class="nav-link">
  日常问题记录
</a></li><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/ts/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  TS
</a></li><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/toolWebsite.html" class="nav-link">
  工具网站合集
</a></li><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/InterviewTheory.html" class="nav-link">
  面试
</a></li><li class="dropdown-item"><!----> <a href="/vuePress/dailyNotes/lifeTips.html" class="nav-link">
  生活
</a></li></ul></div></div><div class="nav-item"><a href="/vuePress/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="https://blog.csdn.net/weixin_43869192" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/fallenaAngel" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>什么是TS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuePress/dailyNotes/ts/#类型" class="sidebar-link">类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuePress/dailyNotes/ts/#联合类型和交叉类型" class="sidebar-link">联合类型和交叉类型</a></li><li class="sidebar-sub-header"><a href="/vuePress/dailyNotes/ts/#type" class="sidebar-link">type</a></li><li class="sidebar-sub-header"><a href="/vuePress/dailyNotes/ts/#typeof运算符" class="sidebar-link">typeof运算符</a></li></ul></li><li><a href="/vuePress/dailyNotes/ts/#类型兼容" class="sidebar-link">类型兼容</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#数组和元组" class="sidebar-link">数组和元组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuePress/dailyNotes/ts/#数组" class="sidebar-link">数组</a></li><li class="sidebar-sub-header"><a href="/vuePress/dailyNotes/ts/#元组" class="sidebar-link">元组</a></li></ul></li><li><a href="/vuePress/dailyNotes/ts/#symbol类型" class="sidebar-link">symbol类型</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#对象" class="sidebar-link">对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#interface-接口" class="sidebar-link">interface 接口</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#class类" class="sidebar-link">class类</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#范型" class="sidebar-link">范型</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#enum枚举" class="sidebar-link">Enum枚举</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#断言" class="sidebar-link">断言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#declare关键字" class="sidebar-link">declare关键字</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#ts运算符" class="sidebar-link">ts运算符</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#类型映射" class="sidebar-link">类型映射</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuePress/dailyNotes/ts/#映射修饰符" class="sidebar-link">映射修饰符</a></li><li class="sidebar-sub-header"><a href="/vuePress/dailyNotes/ts/#键名重映射" class="sidebar-link">键名重映射</a></li></ul></li><li><a href="/vuePress/dailyNotes/ts/#jsx" class="sidebar-link">JSX</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuePress/dailyNotes/ts/#无状态函数组件" class="sidebar-link">无状态函数组件</a></li></ul></li><li><a href="/vuePress/dailyNotes/ts/#ts内置的类型工具" class="sidebar-link">TS内置的类型工具</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#注释指令" class="sidebar-link">注释指令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#tsconfig-json" class="sidebar-link">tsconfig.json</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuePress/dailyNotes/ts/#lib-d-ts" class="sidebar-link">lib.d.ts</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="什么是ts"><a href="#什么是ts" class="header-anchor">#</a> 什么是TS</h1> <p>是一种静态类型语言，是动态类型语言js的超集。js虽然也有类型，但它是随时可变的。所以添加了ts这种静态类型语言来约束。</p> <p>TypeScript 使用结构化类型，这个系统并不同于你可能使用过的一些其他流行语言（如：Java、C# 等）的类型系统。</p> <p>结构化类型系统背后的思想是如果他们的成员类型是兼容的，则他们是兼容的。</p> <p>它有优点如下：</p> <ol><li>有利于代码的静态分析，在写的阶段就能发现问题</li> <li>有利于发现问题，由于每个值、每个变量、每个运算符都有严格的类型约束，TypeScript 就能轻松发现拼写错误、语义错误和方法调用错误，节省程序员的时间。</li> <li>更好的IDE支持。</li> <li>提供了代码文档，类型信息可以部分替代代码文档，解释应该如何使用这些代码。</li> <li>有助于代码重构。修改他人的 JavaScript 代码，往往非常痛苦，项目越大越痛苦，因为不确定修改后是否会影响到其他部分的代码。</li></ol> <p>当然也有缺点，如下：</p> <ol><li>丧失了动态类型的代码灵活性。</li> <li>增加了编程工作量。</li> <li>更高的学习成本。</li> <li>引入了独立的编译步骤，需要专门的ts编译器转化。</li> <li>兼容性问题。TypeScript 依赖 JavaScript 生态，需要用到很多外部模块。但是，过去大部分 JavaScript 项目都没有做 TypeScript 适配，虽然可以自己动手做适配，不过使用时难免还是会有一些兼容性问题。</li></ol> <p>学习 ts 需要分清楚“值”（value）和“类型”（type）,ts“类型”是针对“值”的，ts代码只涉及类型，不涉及值。所有跟“值”相关的处理，都由 JavaScript 完成。
需要时刻注意 ts只是一种类型约束，并不代表代码逻辑。</p> <p><a href="https://www.typescriptlang.org/play?#code/C4TwDgpgBAGlC8UDOwBOBLAdgcwFABsJgoAPALhlygGMB7TJWwgOn1uwApRJaAzUgJS4gA" target="_blank" rel="noopener noreferrer">ts官方提供的在线演练<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h2> <p>先看一下ts专门提供的3种特殊类型 “顶层类型”any、unknown，和“底层类型”never。</p> <p>“顶层类型”any、unknown可以被赋值任意其他类型。
“底层类型”never类型可以赋值给任意其他类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> v<span class="token operator">:</span><span class="token builtin">any</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
v <span class="token operator">=</span> <span class="token string">'1'</span>

<span class="token comment">// 表示永远没有返回值</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> v1<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不报错</span>
<span class="token keyword">let</span> v2<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不报错</span>
<span class="token keyword">let</span> v3<span class="token operator">:</span><span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不报错</span>
</code></pre></div><ol><li><p>any类型表示没有任何限制，该类型的变量可以赋予任意类型的值。</p></li> <li><p>unknown 与any含义相同，表示类型不确定，可能是任意类型，但是它的使用有一些限制，不像any那样自由，可以视为严格版的any。</p> <ol><li><p>unknown类型的变量，不能直接赋值给其他类型的变量（除了any类型和unknown类型）。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// let v:any = 123;</span>
<span class="token comment">// let v1:boolean = v; // 正确</span>
<span class="token comment">// let v2:number = v; // 正确</span>
<span class="token comment">// 上述v为any类型，可以赋值给任意类型，但会对v1和v2造成类型污染。</span>

<span class="token comment">// 变量v是unknown类型，赋值给any和unknown以外类型的变量都会报错，</span>
<span class="token comment">// 这就避免了any类型的污染问题</span>
<span class="token keyword">let</span> v<span class="token operator">:</span><span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> v1<span class="token operator">:</span><span class="token builtin">boolean</span> <span class="token operator">=</span> v<span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token keyword">let</span> v2<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> v<span class="token punctuation">;</span> <span class="token comment">// 报错</span>
</code></pre></div></li> <li><p>不能直接调用unknown类型变量的方法和属性。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">let</span> v1<span class="token operator">:</span><span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  v1<span class="token punctuation">.</span>foo  <span class="token comment">// 报错</span>

  <span class="token keyword">let</span> v2<span class="token operator">:</span><span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
  v2<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>

  <span class="token keyword">let</span> v3<span class="token operator">:</span><span class="token function-variable function">unknown</span> <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token function">v3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>
</code></pre></div></li> <li><p>unknown类型变量能够进行的运算是有限的。只能进行比较运算（运算符==、===、!=、!==、||、&amp;&amp;、?）、取反运算（运算符!）、typeof运算符instanceof运算符这几种，其他运算都会报错。</p></li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> a<span class="token operator">:</span><span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

 a <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 报错</span>
 a <span class="token operator">===</span> <span class="token number">1</span> <span class="token comment">// 正确</span>
<span class="token comment">// 那么，怎么才能使用unknown类型变量呢？也就是可以让 a + 1输出正确结果</span>
<span class="token comment">// 答案是只有经过“类型缩小”，就是缩小unknown变量的类型范围，确保不会出错。</span>
 <span class="token keyword">let</span> b<span class="token operator">:</span><span class="token builtin">unknown</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
 <span class="token comment">// unknown类型的变量a经过typeof运算以后，能够确定实际类型是number，就能用于加法运算了</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> b <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">let</span> r <span class="token operator">=</span> b <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 正确</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// 这就是“类型缩小”，即将一个不确定的类型缩小为更明确的类型。</span>
<span class="token comment">// unknown可以看作是更安全的any。一般来说，凡是需要设为any类型的地方，通常都应该优先考虑设为unknown类型</span>
</code></pre></div></li> <li><p>never“空类型”的概念，即该类型为空，不包含任何值。</p> <ol><li><code>let x:never;</code>变量x的类型是never，就不可能赋给它任何值，否则都会报错。</li></ol></li></ol> <p>5种基本类型boolean,string,number,bigint,symbol， 3种特殊类型object,undefined,null。</p> <ol><li><p>bigint用于表示超出标准整数范围的整数。eg：<code>const x: bigint = 123n</code>，123n 表示一个 BigInt 值，它的值就是整数 123。</p></li> <li><p>symbol用于创建唯一且不可变的标识符，eg: <code>const x:symbol = Symbol()</code>，这样，变量 x 就被赋值为一个全局唯一的 Symbol。每个
Symbol 都是独一无二的。可以用来做provide的key。</p></li> <li><p>object 类型包含了所有对象、数组和函数。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> x<span class="token operator">:</span>object <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 对象</span>
<span class="token keyword">const</span> y<span class="token operator">:</span>object <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 数组</span>
<span class="token keyword">const</span> z<span class="token operator">:</span><span class="token function-variable function">object</span> <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 函数</span>
</code></pre></div></li> <li><p>TypeScript 规定，单个值也是一种类型，称为“值类型”。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> x<span class="token operator">:</span><span class="token string">'hello'</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span> <span class="token comment">// 正确</span>
<span class="token comment">// 变量x的类型是字符串hello，导致它只能赋值为这个字符串，赋值为其他字符串就会报错</span>
x <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>

<span class="token comment">// const命令声明的变量，如果代码里面没有注明类型，就会推断该变量是值类型</span>
<span class="token comment">// z 的类型是 &quot;https&quot;</span>
 <span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token string">'https'</span><span class="token punctuation">;</span>
 <span class="token comment">// y 的类型是 string</span>
 <span class="token keyword">const</span> y<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'https'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>TypeScript 支持块级类型声明，也就是说在大括号里面的类型只会在当前作用域生效。</p></li></ol> <h3 id="联合类型和交叉类型"><a href="#联合类型和交叉类型" class="header-anchor">#</a> 联合类型和交叉类型</h3> <ol><li><p>联合类型A|B表示，任何一个类型只要属于A或B，就属于联合类型A|B，eg：<code>const a = string|number</code>。</p> <ol><li><p>联合类型一般会需要进行“类型缩小”操作，eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getPort</span><span class="token punctuation">(</span>
  scheme<span class="token operator">:</span> <span class="token string">'http'</span><span class="token operator">|</span><span class="token string">'https'</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// scheme 可能是两种情况，函数体内部就需要区分不同情况走不同逻辑，这就是圈定类型走对应逻辑</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>scheme<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'http'</span><span class="token operator">:</span>
     <span class="token keyword">return</span> <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">'https'</span><span class="token operator">:</span>
     <span class="token keyword">return</span> <span class="token number">443</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></li> <li><p>交叉类型A&amp;B表示，任何一个类型必须同时属于A和B，交叉类型常常用来为对象类型添加新属性，eg：<code>const a = {a: 1}&amp;{b: 2}</code>。</p> <ol><li><p>所以交叉类型的主要用途是表示对象的合成。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 定义obj类型，要求必须同时有foo和bar属性</span>
<span class="token keyword">let</span> obj<span class="token operator">:</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> bar<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 具体值实现</span>
obj <span class="token operator">=</span> <span class="token punctuation">{</span>
foo<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
bar<span class="token operator">:</span> <span class="token string">'world'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>如果两个类型中 有相同key但是类型不同，则该key为never类型。eg：</p></li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">interface</span> <span class="token class-name">Eg1</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">interface</span> <span class="token class-name">Eg2</span> <span class="token punctuation">{</span>
    color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// T的类型为 {name: string; age: never; color: string}</span>
  <span class="token comment">// 注意，age因为Eg1和Eg2中的类型不一致，所以交叉后age的类型是never</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Eg1 <span class="token operator">&amp;</span> Eg2
  <span class="token comment">// 可通过如下示例验证</span>
  <span class="token keyword">const</span> val<span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    color<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 不会抱错</span>
      <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="type"><a href="#type" class="header-anchor">#</a> type</h3> <p>type命令用来定义一个类型的别名。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// type命令为number类型定义了一个别名Age。这样就能像使用number一样，使用Age作为类型。</span>
<span class="token keyword">type</span> <span class="token class-name">Age</span> <span class="token operator">=</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> age<span class="token operator">:</span>Age <span class="token operator">=</span> <span class="token number">55</span><span class="token punctuation">;</span> <span class="token comment">// 相当于age:number = 55</span>
</code></pre></div><ol><li><p>不允许重复</p></li> <li><p>别名的作用域是块级作用域。这意味着，代码块内部定义的别名，影响不到外部</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">type</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>别名支持使用表达式，也可以在定义一个别名时，使用另一个别名，即别名允许嵌套</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">World</span> <span class="token operator">=</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Greeting</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>World<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h3 id="typeof运算符"><a href="#typeof运算符" class="header-anchor">#</a> typeof运算符</h3> <p>ts 将js的typeof 运算符移植到了类型运算，它的操作数依然是一个值，但是返回的不是字符串，而是该值的 ts 类型。 eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// JavaScript 里面，typeof运算符只可能返回八种结果，而且都是字符串。</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// &quot;undefined&quot;</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// &quot;boolean&quot;</span>
<span class="token keyword">typeof</span> <span class="token number">1337</span><span class="token punctuation">;</span> <span class="token comment">// &quot;number&quot;</span>
<span class="token keyword">typeof</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span> <span class="token comment">// &quot;string&quot;</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// &quot;object&quot;</span>
<span class="token keyword">typeof</span> parseInt<span class="token punctuation">;</span> <span class="token comment">// &quot;function&quot;</span>
<span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;symbol&quot;</span>
<span class="token keyword">typeof</span> <span class="token number">127n</span> <span class="token comment">// &quot;bigint&quot;</span>

<span class="token comment">// 举例</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T0</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> a<span class="token punctuation">;</span>   <span class="token comment">// { x: number }，如果是js中的 type a 返回的会是&quot;object&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> a<span class="token punctuation">.</span>x<span class="token punctuation">;</span> <span class="token comment">// number</span>

<span class="token comment">// 所以在使用时需要注意ts的和js的typeof 搞混了</span>
<span class="token comment">// ts的typeof 只能用在类型运算之中（即跟类型相关的代码之中），不能用在值运算</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b<span class="token operator">:</span><span class="token keyword">typeof</span> c<span class="token punctuation">;</span> <span class="token comment">// ts的typeof返回number类型，最终编译结果这个typeof会被删掉</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> c <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token comment">// js的typeof返回字符串'number'类型，最终编译结果这个typeof会保留</span>
<span class="token comment">// 编译结果</span>
<span class="token comment">// let c = 1;</span>
<span class="token comment">// let b;</span>
<span class="token comment">// console.log(typeof c === 'number')</span>
</code></pre></div><ol><li><p>由于编译时不会进行 JavaScript 的值运算，所以TypeScript 规定，typeof 的参数只能是标识符，不能是需要运算的表达式。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错 Date()需要运算才知道结果。</span>
</code></pre></div></li> <li><p>typeof命令的参数不能是类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Age</span> <span class="token operator">=</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">MyAge</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> Age<span class="token punctuation">;</span> <span class="token comment">// 报错 Age是一个类型别名，用作typeof命令的参数就会报错。</span>
</code></pre></div></li></ol> <h2 id="类型兼容"><a href="#类型兼容" class="header-anchor">#</a> 类型兼容</h2> <p>TypeScript 的类型存在兼容关系，某些类型可以兼容其他类型。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token comment">// 如果类型A的值可以赋值给类型B，那么类型A就称为类型B的子类型（subtype）</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token builtin">number</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> a<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token comment">// 类型number就是类型number|string的子类型。b的类型兼容a的类型</span>
  <span class="token keyword">let</span> b<span class="token operator">:</span><span class="token constant">T</span> <span class="token operator">=</span> a<span class="token punctuation">;</span>

  <span class="token comment">// 但是凡是可以使用父类型的地方，都可以使用子类型，但是反过来不行。</span>
  <span class="token comment">// hi是string的子类型，string是hi的父类型。</span>
  <span class="token comment">// 所以，变量c可以赋值给变量d，但是反过来就会报错</span>
  <span class="token keyword">let</span> c<span class="token operator">:</span><span class="token string">'hi'</span> <span class="token operator">=</span> <span class="token string">'hi'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> d<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
  d <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token comment">// 正确</span>
  c <span class="token operator">=</span> d<span class="token punctuation">;</span> <span class="token comment">// 报错，此时c的类型是值类型“hi”，而d的类型是string 可以是任意字符串，所以不能赋值给c</span>

  <span class="token comment">//子类型继承了父类型的所有特征，所以可以用在父类型的场合。但是，子类型还可能有一些父类型没有的特征，所以父类型不能用在子类型的场合。</span>
</code></pre></div><p>因此，我们可以得出基本的结论：子类型比父类型更加具体,父类型比子类型更宽泛。</p> <h2 id="数组和元组"><a href="#数组和元组" class="header-anchor">#</a> 数组和元组</h2> <h3 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h3> <p>JavaScript 数组在 TypeScript 里面分成两种类型，分别是数组（array）和元组（tuple）。</p> <ol><li><p>TypeScript 数组有一个根本特征：所有成员的类型必须相同，但是成员数量是不确定的，可以是无限数量的成员，也可以是零成员。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 数组增加成员或减少成员，都是可以的</span>

<span class="token comment">// 定义数组成员可以有不同类型</span>
<span class="token comment">// 这里注意区分括号是必须的，因为竖杠（|）的优先级低于[]，如果不带括号ts会理解成number和string[]的联合类型</span>
<span class="token keyword">let</span> arr1<span class="token operator">:</span><span class="token punctuation">(</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span>
<span class="token comment">// 范型写法</span>
<span class="token keyword">let</span> arr2<span class="token operator">:</span><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> arr3<span class="token operator">:</span><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span>
</code></pre></div></li> <li><p>在js种，通过const定义的数组允许修改，在ts种也是，那如何定义只读的数组呢？</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 在ts中可以声明只读类型的数组</span>
<span class="token keyword">const</span> arr<span class="token operator">:</span><span class="token keyword">readonly</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token keyword">delete</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token comment">// 只读数组的另外一种写法，断言为const不可变</span>
<span class="token comment">// as const告诉 TypeScript，推断类型时要把变量arr推断为只读数组，从而使得数组成员无法改变。</span>
<span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
arr1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token comment">// TypeScript 将readonly number[]与number[]视为两种不一样的类型，后者是前者的子类型。</span>
<span class="token comment">// 这是因为只读数组没有pop()、push()之类会改变原数组的方法，</span>
<span class="token comment">// 所以number[]的方法数量要多于readonly number[]，</span>
<span class="token comment">// 这意味着number[]其实是readonly number[]的子类型。</span>

<span class="token comment">// 所以子类型number[]可以用于所有使用父类型的场合，反过来就不行。</span>
<span class="token keyword">let</span> a1<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a2<span class="token operator">:</span><span class="token keyword">readonly</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> a1<span class="token punctuation">;</span> <span class="token comment">// 正确</span>
a1 <span class="token operator">=</span> a2<span class="token punctuation">;</span> <span class="token comment">// 报错</span>

<span class="token comment">// 注意：readonly关键字不能与数组的泛型写法一起使用。</span>
<span class="token comment">//  const arr2:readonly Array&lt;number&gt; = [0, 1]; // 报错 'readonly' type modifier is only permitted on array and tuple literal types.</span>
<span class="token comment">// 所以ts专门提供了两个范型，用来生成只读数组</span>
<span class="token keyword">const</span> a4<span class="token operator">:</span>ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 尖括号里面是数组成员</span>
<span class="token keyword">const</span> a5<span class="token operator">:</span>Readonly<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 尖括号里面是整个数组</span>
</code></pre></div></li> <li><p>TypeScript 使用T[][]的形式，表示二维数组，T是最底层数组成员的类型。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code> <span class="token keyword">let</span> arr<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div></li></ol> <h3 id="元组"><a href="#元组" class="header-anchor">#</a> 元组</h3> <p>元组（tuple）是 TypeScript 特有的数据类型，JavaScript 没有单独区分这种类型。
它表示成员类型可以自由设置的数组，即数组的各个成员的类型可以不同，但必须明确声明每个成员的类型。
一般使用场景：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 数组的成员类型写在方括号外面（number[]），元组的成员类型是写在方括号里面（[number]）。</span>
<span class="token keyword">let</span> a<span class="token operator">:</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 元组</span>
<span class="token comment">// 元组的只读属性，属性加问号</span>
<span class="token keyword">let</span> a2<span class="token operator">:</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">?</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 但是问号只能用于元组的尾部成员，也就是说，所有可选成员必须在必选成员之后。</span>
<span class="token keyword">type</span> <span class="token class-name">myTuple</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token builtin">number</span><span class="token operator">?</span><span class="token punctuation">,</span>
  <span class="token builtin">string</span><span class="token operator">?</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 接收x和y两个参数，并且都是number类型</span>
<span class="token keyword">function</span> <span class="token function">distanceFromOrigin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>x<span class="token operator">**</span><span class="token number">2</span> <span class="token operator">+</span> y<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li><p>数组的成员类型写在方括号外面（number[]），元组的成员类型是写在方括号里面（[number]）。</p></li> <li><p>元组成员的类型可以添加问号后缀（?），表示该成员是可选的。</p> <ol><li>注意：问号只能用于元组的尾部成员，也就是说，所有可选成员必须在必选成员之后。</li></ol></li> <li><p>由于需要声明每个成员的类型，所以大多数情况下，元组的成员数量是有限的，从类型声明就可以明确知道，元组包含多少个成员，越界的成员会报错。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> x<span class="token operator">:</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
x<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'c'</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>

<span class="token comment">// 但是使用扩展运算符（...），可以表示不限成员数量的元组。</span>
<span class="token keyword">type</span> <span class="token class-name">NamedNums</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a<span class="token operator">:</span>NamedNums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b<span class="token operator">:</span>NamedNums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 扩展运算符用在元组的任意位置都可以，但是它后面只能是数组或元组</span>
<span class="token keyword">type</span> <span class="token class-name">t1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">t2</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">t3</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 如果不确定元组成员的类型和数量，可以写成下面这样</span>
<span class="token keyword">type</span> <span class="token class-name">Tuple</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token comment">// 只读元组</span>
<span class="token keyword">type</span> <span class="token class-name">t</span> <span class="token operator">=</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">t</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">// 范型写法</span>
<span class="token comment">// 跟数组一样，只读元组是元组的父类型。所以，元组可以替代只读元组，而只读元组不能替代元组。</span>
<span class="token keyword">type</span> <span class="token class-name">t4</span> <span class="token operator">=</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token keyword">type</span> <span class="token class-name">t5</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

 <span class="token keyword">let</span> x1<span class="token operator">:</span>t5 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token keyword">let</span> y<span class="token operator">:</span>t4 <span class="token operator">=</span> x1<span class="token punctuation">;</span> <span class="token comment">// 正确</span>
 x1 <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// 报错</span>
</code></pre></div></li></ol> <h2 id="symbol类型"><a href="#symbol类型" class="header-anchor">#</a> symbol类型</h2> <p>每一个symbol都是独一无二的，类型是symbol，</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> x<span class="token operator">:</span><span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y<span class="token operator">:</span><span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
x <span class="token operator">===</span> y <span class="token comment">// false</span>
<span class="token comment">// 上面 symbol类型包含所有的 Symbol 值，但是无法表示某一个具体的 Symbol 值。</span>
<span class="token comment">// 如果想表达具体的值，需要用unique symbol，必须用const声明，用let会抱错</span>
<span class="token keyword">const</span> z<span class="token operator">:</span>unique <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 相当于 z:'z' = 'z'</span>
<span class="token keyword">const</span> a<span class="token operator">:</span>unique <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b<span class="token operator">:</span><span class="token keyword">typeof</span> a <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// 正确</span>

<span class="token comment">//unique symbol 类型的一个作用，就是用作属性名，</span>
<span class="token comment">// 这可以保证不会跟其他属性名冲突。</span>
<span class="token comment">// 如果要把某一个特定的 Symbol 值当作属性名，那么它的类型只能是 unique symbol，</span>
<span class="token comment">// 不能是 symbol。</span>
<span class="token keyword">const</span> x1<span class="token operator">:</span>unique <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> y1<span class="token operator">:</span><span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>x1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 正确</span>
  <span class="token punctuation">[</span>y1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <p>函数的类型声明，需要在声明函数时，给出参数的类型和返回值的类型。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 写法一</span>
<span class="token keyword">const</span> <span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>txt<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 写法二</span>
<span class="token comment">// 函数的参数要放在圆括号里面，不放会报错</span>
<span class="token keyword">const</span> <span class="token function-variable function">hello2</span><span class="token operator">:</span> <span class="token punctuation">(</span>txt<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function-variable function">void</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>txt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello '</span> <span class="token operator">+</span> txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol><li><p>函数类型还可以采用对象的写法。写法如下：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 add<span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token number">1</span>
 <span class="token comment">// {</span>
 <span class="token comment">//   (参数列表): 返回值</span>
 <span class="token comment">// }</span>
 <span class="token keyword">let</span> Add<span class="token operator">:</span><span class="token punctuation">{</span>
   <span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
   version<span class="token operator">:</span> <span class="token builtin">number</span>
 <span class="token punctuation">}</span> <span class="token operator">=</span> add

 <span class="token comment">// 也可以使用interface描述类型</span>
 <span class="token keyword">interface</span> <span class="token class-name">myfn</span> <span class="token punctuation">{</span>
   <span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">var</span> add<span class="token operator">:</span><span class="token function-variable function">myfn</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>问题</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code> <span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'alice'</span><span class="token punctuation">,</span> <span class="token string">'bob'</span><span class="token punctuation">,</span> <span class="token string">'jan'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
   <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">:</span>Person <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token keyword">typeof</span> people<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>函数可以设置可选参数，只需在参数名称后面加问号既可以，eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// 会抱错吗？</span>
<span class="token comment">// 函数的可选参数只能在参数列表的尾部，跟在必选参数的后面。</span>
<span class="token comment">// let myFunc: (a?:number, b:number) =&gt; number; // 报错</span>

<span class="token comment">// 如果前面的参数有可能为空，这时只能显式注明该参数类型可能为undefined。</span>
<span class="token keyword">let</span> <span class="token function-variable function">myFunc</span><span class="token operator">:</span> <span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> b<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>函数可以设置默认值，写法跟js一样，设置了默认值的参数，就是可选的。如果不传入该参数，它就会等于默认值。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">createPoint</span><span class="token punctuation">(</span>
x<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
y<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">createPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// [0, 0]</span>

<span class="token comment">// 但是可选参数与默认值不能同时使用</span>
<span class="token comment">//  function f(x?: number = 0) { // 报错}</span>
</code></pre></div></li> <li><p>设有默认值的参数，如果传入undefined，也会触发默认值。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">f2</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// 456</span>
<span class="token comment">// 问题：怎么让函数调用结果等于1</span>
<span class="token keyword">function</span> <span class="token function">add</span> <span class="token punctuation">(</span>
x<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
y<span class="token operator">:</span><span class="token builtin">number</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>函数参数解构和rest</p> <ol><li><p>函数参数解构可以和type别名一起用，eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">ABC</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span> b<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span> c<span class="token operator">:</span><span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">}</span><span class="token operator">:</span><span class="token constant">ABC</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>rest参数表示函数剩余的所有参数，它可以是数组（剩余参数类型相同），也可能是元组（剩余参数类型不同）,eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// rest 参数为数组</span>
<span class="token keyword">function</span> <span class="token function">joinNumbers</span><span class="token punctuation">(</span><span class="token operator">...</span>nums<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// rest 参数为元组</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span><span class="token punctuation">[</span><span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 注意，元组需要声明每一个剩余参数的类型。如果元组里面的参数是可选的，则要使用可选参数</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>
 <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">?</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div></li></ol></li> <li><p>返回值：void定义、never定义和readonly参数</p> <ol><li><p>如果变量、对象方法、函数参数的类型是 void 类型的函数，那么并不代表不能赋值为有返回值的函数。恰恰相反，该变量、对象方法和函数参数可以接受返回任意值的函数，这时并不会报错。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">voidFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> f<span class="token operator">:</span><span class="token function-variable function">voidFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 这是因为，这时 TypeScript 认为，这里的 void 类型只是表示该函数的返回值没有利用价值，</span>
<span class="token comment">// 或者说不应该使用该函数的返回值。只要不用到这里的返回值，就不会报错。</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 这儿就会抱错</span>
</code></pre></div></li> <li><p>never类型表示肯定不会出现的值。它用在函数的返回值，就表示某个函数肯定不会返回值，即函数不会正常执行结束。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 注意，never类型不同于void类型。前者表示函数没有执行结束，不可能有返回值；</span>
<span class="token comment">// 后者表示函数正常执行结束，但是不返回值，或者说返回undefined。</span>

<span class="token comment">// 注意，只有抛出错误，才是 never 类型。如果显式用return语句返回一个 Error 对象，返回值就不是 never 类型</span>
<span class="token keyword">function</span> <span class="token function">fail</span><span class="token punctuation">(</span>msg<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>readonly eg：</p></li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">arraySum</span><span class="token punctuation">(</span>
  arr<span class="token operator">:</span><span class="token keyword">readonly</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>高阶函数：一个函数的返回值还是一个函数，那么前一个函数就称为高阶函数。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token punctuation">(</span>someValue<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">(</span>multiplier<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> someValue <span class="token operator">*</span> multiplier
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>函数重载：有些函数可以接受不同类型或不同个数的参数，并且根据参数的不同，会有不同的函数行为。这种根据参数类型不同，执行不同逻辑的行为，称为函数重载。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 前两行类型声明列举了重载的各种情况。第三行是函数本身的类型声明，它必须与前面已有的重载声明兼容</span>
<span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span>str<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span>arr<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span>
  stringOrArray<span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> stringOrArray <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> stringOrArray<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    <span class="token keyword">return</span> stringOrArray<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>构造函数：JavaScript 语言使用构造函数，生成对象的实例。构造函数的最大特点，就是必须使用new命令调用。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// js构造函数</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用new命令调用，返回 Date 对象的实例</span>
<span class="token comment">// 构造函数的类型写法，就是在参数列表前面加上new命令。</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
 numLegs<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 用new关键字来声明传入的c是一个构造函数而不是普通函数</span>
<span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span>c<span class="token operator">:</span><span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Animal<span class="token punctuation">)</span><span class="token operator">:</span>Animal <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>Animal<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 构造函数另一种写法 就是用对象形式</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span>s<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> object<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 某些函数既是构造函数，又可以当作普通函数使用，比如Date()。这时，类型声明可以写成下面这样</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">F</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span>s<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> object<span class="token punctuation">;</span>
  <span class="token punctuation">(</span>n<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="对象"><a href="#对象" class="header-anchor">#</a> 对象</h2> <p>除了原始类型，对象是 JavaScript 最基本的数据结构。TypeScript 对于对象类型有很多规则。</p> <p>对象类型的最简单声明方法，就是使用大括号表示对象，在大括号内部声明每个属性和方法的类型。
eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code> <span class="token comment">// 最简单的声明，其中属性的类型可以用分号结尾，也可以用逗号结尾，最后一个属性后面，可以写分号或逗号，也可以不写</span>
  <span class="token keyword">const</span> obj<span class="token operator">:</span><span class="token punctuation">{</span>
    x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token operator">:</span><span class="token builtin">number</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 属性类型以逗号结尾</span>
  <span class="token keyword">type</span> <span class="token class-name">MyObj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>
    y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 一旦声明了类型，对象赋值时，就不能缺少指定的属性，也不能有多余的属性，读写不存在的属性也会报错，也不能删除类型声明中存在的属性</span>
  <span class="token comment">// 对象的方法使用函数类型描述</span>
  <span class="token keyword">const</span> obj2<span class="token operator">:</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// 或者写成</span>
    <span class="token comment">// add: (x:number, y:number) =&gt; number;</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    y<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 可以读取对象的属性类型</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">X1</span></span> <span class="token operator">=</span> MyObj<span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span>

  <span class="token comment">// 可以发现，上述都是用type声明对象的类型，除了type命令可以为对象类型声明一个别名，</span>
<span class="token comment">// ts 还提供了interface命令，可以把对象类型提炼为一个接口</span>
  <span class="token keyword">interface</span> <span class="token class-name">MyObj</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 可选属性，只读属性</span>
  <span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    lastName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    lastName2<span class="token operator">:</span> <span class="token builtin">string</span><span class="token operator">|</span><span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// 可选属性等同于lastName的值可以为undefined</span>
    <span class="token keyword">readonly</span> prop<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 只读属性只能在对象初始化期间赋值，此后就不能修改该属性</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> user<span class="token operator">:</span>User <span class="token operator">=</span> <span class="token punctuation">{</span>firstName<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> lastName2<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> prop<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
  <span class="token comment">// user.prop = 2 会抱错 Cannot assign to 'prop' because it is a read-only property.</span>

  <span class="token comment">// 但是 如果属性值是一个对象，readonly修饰符并不禁止修改该对象的属性，只是禁止完全替换掉该对象</span>
  <span class="token comment">// 如果两个变量对应同一个对象，其中一个变量是可写的，另一个变量是只读的，那么从可写变量修改属性，会影响到只读变量</span>
  <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">interface</span> <span class="token class-name">ReadonlyPerson</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token keyword">readonly</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> w<span class="token operator">:</span>Person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Vicky'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> r<span class="token operator">:</span>ReadonlyPerson <span class="token operator">=</span> w<span class="token punctuation">;</span>
  w<span class="token punctuation">.</span>age <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  r<span class="token punctuation">.</span>age <span class="token comment">// 43</span>
</code></pre></div><ol><li><p>属性名称的索引类型：如果对象有很多个暂时无法确定的属性，可以使用索引，eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyObj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token punctuation">[</span>property<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 这儿property表示属性名称，这个可以随便起，后面的string标识属性名称的类型是字符串，值也是字符串</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 需要注意的是 属性名称的类型 只有 string，number，symbol三种</span>
</code></pre></div></li> <li><p>解构赋值</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> price<span class="token punctuation">}</span><span class="token operator">:</span><span class="token punctuation">{</span>
id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
price<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> product<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>结构类型原则：只要对象 B 满足 对象 A 的结构特征，TypeScript 就认为对象 B 兼容对象 A 的类型，这称为“结构类型”原则。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 对象A只有一个属性x，类型为number。对象B满足这个特征，因此兼容对象A，只要可以使用A的地方，就可以使用B</span>
 <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
   x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>

 <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
   y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
   x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
   y<span class="token operator">:</span> <span class="token number">1</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// A和B并不是同一个类型，但是B可以赋值给A，因为B满足A的结构特征</span>
 <span class="token keyword">const</span> a<span class="token operator">:</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span> <span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token comment">// 正确</span>

<span class="token comment">// 问题：</span>
<span class="token keyword">type</span> <span class="token class-name">myObj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
   x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
   y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getSum</span><span class="token punctuation">(</span>obj<span class="token operator">:</span>myObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> n <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// Element implicitly has an 'any' type because expression of type 'string' can't be used to index type 'myObj'.</span>
<span class="token comment">// No index signature with a parameter of type 'string' was found on type 'myObj'.</span>
    <span class="token keyword">const</span> v <span class="token operator">=</span> obj<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 报错 为什么</span>
    sum <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 函数getSum()要求传入参数的类型是myObj，但是实际上所有与myObj兼容的对象都可以传入。</span>
<span class="token comment">// 这会导致const v = obj[n]这一行报错，原因是obj[n]取出的属性值不一定是数值（number），使得变量v的类型被推断为any。</span>
<span class="token comment">// 如果项目设置为不允许变量类型推断为any，代码就会报错</span>
</code></pre></div></li> <li><p>最小可选属性规则，eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Options</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
  b<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
  c<span class="token operator">?</span><span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 类型Options是一个对象，它的所有属性都是可选的，这导致任何对象实际都符合Options类型</span>
  <span class="token keyword">const</span> obj<span class="token operator">:</span>Options <span class="token operator">=</span> <span class="token punctuation">{</span>
    d<span class="token operator">:</span> <span class="token number">123</span> <span class="token comment">// 报错</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 为了避免这种情况，ts 添加了最小可选属性规则，规定这时属于Options类型的对象，必须至少存在一个可选属性，不能所有可选属性都不存在</span>
</code></pre></div></li> <li><p>空对象，eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 在js种，我们一般会先定义空对象，然后在填充属性，</span>
<span class="token comment">// 但是在ts中，如果定义了空对象，就会被解析为特殊类型：空对象，不允许再填充属性了。</span>
<span class="token keyword">let</span> pt <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 等同于const pt:Object</span>
pt<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// 错误，空对象不能填充属性</span>
pt <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// 都是合法的，因为这些都是object类型，除了null和undefined</span>
pt <span class="token operator">=</span> <span class="token string">'2'</span>
pt <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 如果确实需要分步声明，一个比较好的方法是，使用扩展运算符（...）合成一个新对象。</span>
<span class="token keyword">const</span> pt0 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pt1 <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pt2 <span class="token operator">=</span> <span class="token punctuation">{</span> y<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pt3 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>pt0<span class="token punctuation">,</span> <span class="token operator">...</span>pt1<span class="token punctuation">,</span> <span class="token operator">...</span>pt2
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <h2 id="interface-接口"><a href="#interface-接口" class="header-anchor">#</a> interface 接口</h2> <p>interface 可以表示对象的各种语法，它的成员有5种形式。</p> <ol><li><p>定义</p> <ul><li><p>对象属性</p> <ul><li>interface Point {
x: number;
y: number;
}</li></ul></li> <li><p>对象的属性索引，属性索引共有string、number和symbol三种类型。</p> <ul><li>interface A {
[prop: string]: number;
}</li></ul></li> <li><p>对象方法</p> <ul><li><p>// 写法一
interface A {
f(x: boolean): string;
}</p></li> <li><p>// 写法二
interface B {
f: (x: boolean) =&gt; string;
}</p></li> <li><p>// 写法三
interface C {
f: { (x: boolean): string };
}</p></li> <li><p>属性名称可以用表达式，所以可以有如下写法：
const f = 'f'
interface A {
[f](x: boolean): string;
}</p></li> <li><p>类型方法可以使用重载</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p>函数，interface 也可以用来声明独立的函数。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Add</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> myAdd<span class="token operator">:</span><span class="token function-variable function">Add</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>构造函数</p> <ul><li><p>interface 内部可以使用new关键字，表示构造函数.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// TypeScript 里面，构造函数特指具有constructor属性的类</span>
<span class="token keyword">interface</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
 <span class="token function">greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">class</span> <span class="token class-name">CustomGreeter</span> <span class="token keyword">implements</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> message<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 
   <span class="token function">greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 
 <span class="token keyword">const</span> customErrorConstructor<span class="token operator">:</span> ErrorConstructor1 <span class="token operator">=</span> CustomGreeter<span class="token punctuation">;</span>
 
 <span class="token comment">// 使用 customErrorConstructor 创建对象</span>
 <span class="token keyword">const</span> greeterInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">customErrorConstructor</span><span class="token punctuation">(</span><span class="token string">&quot;Custom Greeting&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeterInstance<span class="token punctuation">.</span><span class="token function">greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;Custom Greeting&quot;</span>
</code></pre></div></li></ul></li></ul></li> <li><p>继承extends</p> <ol><li><p>interface之间继承</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Style</span> <span class="token punctuation">{</span>
 color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token keyword">extends</span> <span class="token class-name">Style</span> <span class="token punctuation">{</span>
name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 可以逗号分割多重继承</span>
<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Style</span><span class="token punctuation">,</span> Shape <span class="token punctuation">{</span>
radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>interface继承type</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Country</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
      capital<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果type命令定义的类型不是对象，interface 就无法继承</span>
<span class="token keyword">interface</span> <span class="token class-name">CountryWithPop</span> <span class="token keyword">extends</span> <span class="token class-name">Country</span> <span class="token punctuation">{</span>
      population<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>interface继承class</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

  <span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">boolean</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  z<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>联合类型与继承</p></li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token comment">// type A1 = 1</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A1</span></span> <span class="token operator">=</span> <span class="token string">'x'</span> <span class="token keyword">extends</span> <span class="token string">'x'</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token comment">// type A2 = 2</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A2</span></span> <span class="token operator">=</span> <span class="token string">'x'</span> <span class="token operator">|</span> <span class="token string">'y'</span> <span class="token keyword">extends</span> <span class="token string">'x'</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token comment">// type A3 = 1 | 2</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token string">'x'</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A3</span></span> <span class="token operator">=</span> <span class="token constant">P</span><span class="token operator">&lt;</span><span class="token string">'x'</span> <span class="token operator">|</span> <span class="token string">'y'</span><span class="token operator">&gt;</span>
  <span class="token comment">// 为什么A2和A3的值不一样？</span>
  <span class="token comment">// 如果用于简单的条件判断，则是直接判断前面的类型是否可分配给后面的类型。</span>
  <span class="token comment">// 若extends前面的类型是泛型，且泛型传入的是联合类型时，则会依次判断该联合类型的所有子类型是否可分配给extends后面的类型（是一个分发的过程）。</span>
  <span class="token comment">// 就是extends前面的参数为联合类型时则会分解（依次遍历所有的子类型进行条件判断）联合类型进行判断。然后将最终的结果组成新的联合类型。</span>
  <span class="token comment">// 如果不想被分解（分发），做法也很简单，可以通过简单的元组类型包裹以下</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token comment">// type A4 = 2;</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A4</span></span> <span class="token operator">=</span> <span class="token constant">P</span><span class="token operator">&lt;</span><span class="token string">'x'</span> <span class="token operator">|</span> <span class="token string">'y'</span><span class="token operator">&gt;</span>
</code></pre></div></li> <li><p>接口合并：多个同名接口会合并成一个接口。同名接口合并时，同一个属性如果有多个类型声明，彼此不能有类型冲突。</p></li></ol> <h2 id="class类"><a href="#class类" class="header-anchor">#</a> class类</h2> <p>eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token comment">// 先声明class的属性和方法的类型和返回值</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// 公开的属性，public可以省略</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> z<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span> <span class="token comment">// 只读，私有，公开一些功能支持</span>
  <span class="token keyword">public</span> a<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 公开</span>
  <span class="token keyword">private</span> b<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 私有</span>
  <span class="token keyword">protected</span> c<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// 保护成员</span>
  <span class="token keyword">static</span> #count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// static定义静态属性，只能通过构造函数访问。Point.count</span>

  <span class="token comment">// 这儿可以使用重载逻辑</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 定义方法的参数类型和返回值</span>
  <span class="token function">add</span><span class="token punctuation">(</span>point<span class="token operator">:</span> Point<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> point<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> point<span class="token punctuation">.</span>y
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Point2</span> <span class="token keyword">extends</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token comment">// class里面也可以使用索引签名，使用方式跟对象的一样</span>
  <span class="token punctuation">[</span>attrName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  e<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 继承的子类在使用this之前必须调用super方法</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>e <span class="token operator">=</span> e
  <span class="token punctuation">}</span>
  <span class="token comment">// 可以使用get和set</span>
  <span class="token keyword">get</span> <span class="token function">e</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>e
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">e</span> <span class="token punctuation">(</span>newVal<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>e <span class="token operator">=</span> newVal
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li><p>implements关键字：实现（implements）是面向对象中的一个重要概念。
一般来讲，一个类只能继承自另一个类，有时候不同类之间可以有一些共有的特性，这时候就可以把特性提取成接口（interfaces），用 implements 关键字来实现。这个特性大大提高了面向对象的灵活性。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token comment">// 假如class1和class2都有相同的ping方法，此时就可以把ping方法提取出来，然后用implements去分别实现</span>
  <span class="token keyword">interface</span> <span class="token class-name">Pingable</span> <span class="token punctuation">{</span>
    <span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    
  <span class="token keyword">class</span> <span class="token class-name">Sonar</span> <span class="token keyword">implements</span> <span class="token class-name">Pingable</span> <span class="token punctuation">{</span>
    <span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ping!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>abstract抽象类：抽象类的作用是充当实现所有抽象成员的子类的基类。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  
    <span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 抱错 Cannot create an instance of an abstract class.</span>
  <span class="token comment">// const b = new Base(); // 无法实例化Base因为它是抽象的</span>
  <span class="token comment">// 我们需要创建一个派生类并实现抽象成员</span>
  <span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  d<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果我们忘记实现基类的抽象成员，我们将收到错误</span>
  <span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token comment">// Non-abstract class 'Derived' does not implement inherited abstract member 'getName' from class 'Base'.</span>
    <span class="token comment">// 如果里面没有实现抽象类定义的abstract方法和属性，会抱错</span>
  <span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="范型"><a href="#范型" class="header-anchor">#</a> 范型</h2> <p>有些时候，我们希望返回的跟传入的类型一致，此时就用到了范型，一般有 函数、接口、类和别名四个使用场景。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 这儿尖括号和里面的T组合就是范型的写法</span>
<span class="token comment">// T不是固定的，类型参数的名字，可以随便取，但是必须为合法的标识符，一般是T，U，V等，多个参数逗号分割</span>
<span class="token comment">// 这个方法表示 传入的是T类型的数组，返回的是T类型</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getFirst</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arr<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 这个方法调用时就必须提供类型参数</span>
<span class="token generic-function"><span class="token function">getFirst</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 尖括号里面可以是以上介绍的任意类型</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">map</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  arr<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">f</span><span class="token operator">:</span><span class="token punctuation">(</span>arg<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">U</span>
<span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">U</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 用法实例</span>
<span class="token generic-function"><span class="token function">map</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 [1, 2, 3]</span>

<span class="token comment">// interface的范型写法</span>
<span class="token keyword">interface</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> box<span class="token operator">:</span>Box<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// interface的范型写法定义函数</span>
<span class="token keyword">interface</span> <span class="token class-name">Fn</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span>Type<span class="token punctuation">)</span><span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">id</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span>Type<span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> myId<span class="token operator">:</span>Fn <span class="token operator">=</span> id<span class="token punctuation">;</span>

<span class="token comment">// class类的范型写法</span>
<span class="token keyword">class</span> <span class="token class-name">Pair<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  key<span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">;</span>
  value<span class="token operator">:</span> <span class="token constant">V</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// type类型别名的范型写法</span>
<span class="token keyword">type</span> <span class="token class-name">Nullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 只要传入一个类型，就可以得到这个类型与undefined和null的一个联合类型</span>
<span class="token keyword">type</span> <span class="token class-name">Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// 可以内部递归使用Tree自身</span>
  value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
  left<span class="token operator">:</span> Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  right<span class="token operator">:</span> Tree<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 类型参数可以有默认值</span>
<span class="token comment">// 但是一旦类型参数有默认值，就表示它是可选参数。如果有多个类型参数，可选参数必须在必选参数之后</span>
<span class="token comment">// &lt;T = boolean, U&gt; // 错误</span>
<span class="token comment">// &lt;T, U = boolean&gt; // 正确</span>

<span class="token comment">// 数组的范型写法</span>
<span class="token keyword">let</span> arr<span class="token operator">:</span><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// number[]就是它的简写形式</span>

<span class="token comment">// 范型的类型参数的约束条件</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">comp</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>a<span class="token operator">:</span>Type<span class="token punctuation">,</span> b<span class="token operator">:</span>Type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这种情况下，就要求传入的Type范型不许有length属性，但这个要求是隐式的</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 所以ts允许在类型参数上面写明约束条件</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">comp</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span> a<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 类型参数的约束条件通常采用写法：&lt;TypeParameter extends ConstraintType&gt;</span>
<span class="token comment">// 范型的特点和注意：</span>
<span class="token comment">/*
* 1. 尽量少用范型，会加大代码的复杂性，使其变得难读难写
* 2. 类型参数越少越好，多一个就会更复杂
* 3. 类型参数需要出现两次，如果类型参数在定义后只出现一次，那么很可能是不必要的
*    function greet&lt;Str extends string&gt;(s:Str) { console.log('Hello, ' + s); }
* 4.范型可以嵌套
* */</span>
</code></pre></div><h2 id="enum枚举"><a href="#enum枚举" class="header-anchor">#</a> Enum枚举</h2> <p>枚举是ts新增的类型，通常用来定义一组常量。Enum 结构比较适合的场景是，成员的值不重要，名字更重要，从而增加代码的可读性和可维护性。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 编译前</span>
<span class="token keyword">enum</span> Color <span class="token punctuation">{</span>
  Red<span class="token punctuation">,</span>     <span class="token comment">// 0</span>
  Green<span class="token punctuation">,</span>   <span class="token comment">// 1</span>
  Blue     <span class="token comment">// 2</span>
<span class="token punctuation">}</span>
<span class="token comment">// 编译后</span>
<span class="token comment">// let Color = {</span>
<span class="token comment">//   Red: 0,</span>
<span class="token comment">//   Green: 1,</span>
<span class="token comment">//   Blue: 2</span>
<span class="token comment">// };</span>
<span class="token comment">// 因为enum编译后是变量，所以不能定义重名的变量（函数/对象/类等）</span>
<span class="token comment">// Enum 成员值都是只读的，不能重新赋值。</span>
<span class="token comment">// Color.Red = 1 // 抱错</span>
<span class="token comment">// enum 成员可以设置初始值，如果不设置，默认从0开始</span>
<span class="token keyword">enum</span> Color1 <span class="token punctuation">{</span>Red<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Blue<span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token comment">// enum 成员值也可以设置为字符串，此时字符串枚举的所有成员值，都必须显式设置。</span>
<span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
  Up <span class="token operator">=</span> <span class="token string">'UP'</span><span class="token punctuation">,</span>
  Down <span class="token operator">=</span> <span class="token string">'DOWN'</span><span class="token punctuation">,</span>
  Red <span class="token operator">=</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token comment">// 注意：字符串 Enum 的成员值，不能使用表达式赋值。</span>
<span class="token keyword">enum</span> MyEnum <span class="token punctuation">{</span>
  <span class="token constant">A</span> <span class="token operator">=</span> <span class="token string">'one'</span><span class="token punctuation">,</span>
  <span class="token constant">B</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'T'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> <span class="token string">'o'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>
<span class="token punctuation">}</span>
<span class="token comment">// 多个同名的 Enum 结构会自动合并，但是同名 Enum 合并时，不能有同名成员，否则报错。</span>
<span class="token comment">// 合并时 只允许其中一个的首成员省略初始值，否则报错。也就是说 同名的enum之间 除了一个可以省略初始值，其他的都必须有。</span>

<span class="token comment">// keyof 运算符可以取出 Enum 结构的所有成员名，作为联合类型返回。</span>
<span class="token keyword">enum</span> MyEnum <span class="token punctuation">{</span>
  <span class="token constant">A</span> <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  <span class="token constant">B</span> <span class="token operator">=</span> <span class="token string">'b'</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token keyword">typeof</span> MyEnum<span class="token punctuation">;</span> <span class="token comment">// 'A'|'B'</span>
<span class="token comment">// 如果要返回 Enum 所有的成员值，可以使用in运算符。</span>
<span class="token comment">// type Foo = { [key in MyEnum]: any }; // { a：any, b: any }</span>
</code></pre></div><h2 id="断言"><a href="#断言" class="header-anchor">#</a> 断言</h2> <p>对于没有类型声明的值，TypeScript 会进行类型推断，很多时候得到的结果，未必是开发者想要的。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> username <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// username的值可能是dom元素或者null，此时if通过之后排除了null</span>
    <span class="token comment">// HTMLElement 类型是没有value属性的，可以断言它就是dom的input元素来获取value</span>
  <span class="token punctuation">(</span>username <span class="token keyword">as</span> HTMLInputElement<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span> <span class="token comment">// 正确</span>
<span class="token punctuation">}</span>

<span class="token comment">// 类型断言的使用前提是，值的实际类型与断言的类型必须满足一个条件。expr as T</span>
<span class="token comment">// expr是实际的值，T是类型断言，它们必须满足下面的条件：expr是T的子类型，或者T是expr的子类型。</span>

<span class="token comment">// let和const</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">'JavaScript'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Lang</span> <span class="token operator">=</span>
  <span class="token operator">|</span><span class="token string">'JavaScript'</span>
  <span class="token operator">|</span><span class="token string">'TypeScript'</span>
  <span class="token operator">|</span><span class="token string">'Python'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">setLang</span><span class="token punctuation">(</span>language<span class="token operator">:</span>Lang<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">setLang</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错，在这儿s被推断为了 类型string，string是类型Lang的父类型，父类型不能替代子类型，导致报错。</span>
<span class="token comment">// 原因是如果没有声明变量类型，let 命令声明的变量，会被类型推断为 TypeScript 内置的基本类型之一；</span>
<span class="token comment">// const 命令声明的变量，则被推断为值类型常量。</span>
<span class="token comment">// 上述问题解决办法1 就是把let改为const,变量s的类型就是值类型JavaScript，它是联合类型Lang的子类型，传入函数setLang()就不会报错。</span>
<span class="token comment">// 办法2就是 let s = 'JavaScript' as const; 断言转为const，不过as为const之后，s的值就不能改了，因为此时相当于用const定义的。</span>
</code></pre></div><h2 id="declare关键字"><a href="#declare关键字" class="header-anchor">#</a> declare关键字</h2> <p>declare 关键字用来告诉编译器，某个类型是存在的，可以在当前文件中使用。它的主要作用，就是让当前文件可以使用其他文件声明的类型。</p> <p>举例来说，自己的脚本使用外部库定义的函数，编译器会因为不知道外部函数的类型定义而报错，这时就可以在自己的脚本里面使用declare关键字，告诉编译器外部函数的类型。这样的话，编译单个脚本就不会因为使用了外部类型而报错。</p> <p>declare可以描述以下类型：</p> <ol><li><p>变量（const、let、var 命令声明）</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 如果当前脚本使用了其他脚本定义的全局变量x。</span>
x <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// 变量x是其他脚本定义的，当前脚本不知道它的类型，编译器就会报错。</span>
<span class="token comment">// 这时使用 declare 命令给出它的类型，就不会报错了。</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> x<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
x <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">// 比如document全局变量</span>
<span class="token comment">// declare 告诉编译器，变量document的类型是外部定义的（具体定义在 TypeScript 内置文件lib.d.ts）。</span>
<span class="token keyword">declare</span> <span class="token keyword">var</span> document<span class="token operator">:</span> Document<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>type 或者 interface 命令声明的类型</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">type</span> <span class="token class-name">num</span> <span class="token operator">=</span> <span class="token builtin">number</span>
<span class="token keyword">declare</span> <span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> num
<span class="token punctuation">}</span>
<span class="token keyword">let</span> Num<span class="token operator">:</span>num <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">let</span> t<span class="token operator">:</span><span class="token constant">T</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> Num
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Num<span class="token punctuation">,</span> t<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>class</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// declare class</span>
<span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>enum</p></li> <li><p>函数（function）</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 外部函数定义</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span>
  name<span class="token operator">:</span><span class="token builtin">string</span>
<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>模块（module）和命名空间（namespace）</p> <p>如果想把变量、函数、类组织在一起，可以将 declare 与 module 或 namespace 一起使用。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">namespace</span> AnimalLib <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">type</span> <span class="token class-name">Animals</span> <span class="token operator">=</span> <span class="token string">'Fish'</span> <span class="token operator">|</span> <span class="token string">'Dog'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 或者</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> AnimalLib <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">type</span> <span class="token class-name">Animals</span> <span class="token operator">=</span> <span class="token string">'Fish'</span> <span class="token operator">|</span> <span class="token string">'Dog'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 举例：</span>
<span class="token comment">// 如果我们此时用了一个外部的模块，它有makeGreeting 和numberOfGreetings方法，</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> myLib<span class="token punctuation">.</span><span class="token function">makeGreeting</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> myLib<span class="token punctuation">.</span>numberOfGreetings<span class="token punctuation">;</span>

<span class="token comment">// 此时，myLib库就可以如下描述类型</span>
<span class="token keyword">declare</span> <span class="token keyword">namespace</span> myLib <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">makeGreeting</span><span class="token punctuation">(</span>s<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> numberOfGreetings<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 同时，在使用myLib时，如果想给myLib添加属性或者方法</span>
<span class="token comment">// 可以使用declare给myLib添加额外的属性和方法</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'myLib'</span> <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 举例2</span>
<span class="token comment">// a.ts</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// b.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">A</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./a'</span><span class="token punctuation">;</span>
<span class="token comment">// 脚本b.ts为a里面的A接口添加了属性y。</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'./a'</span> <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> a<span class="token operator">:</span><span class="token constant">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 注意点：</span>
<span class="token comment">// module后面的name跟 import 和 export 的模块名规则是一样的，</span>
<span class="token comment">// 且必须跟当前文件加载该模块的语句写法（上例import { A } from './a'）保持一致。</span>
<span class="token comment">// 不能创建新的顶层类型，只能对原有的进行扩展</span>
<span class="token comment">// 不能对默认的default接口进行扩展，只能对 export 命令输出的命名接口进行扩充。这是因为在进行类型扩展时，需要依赖输出的接口名。</span>

<span class="token comment">// 某些第三方模块，原始作者没有提供接口类型，这时可以在自己的脚本顶部加上下面一行命令。</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;hot-new-module&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 外部模块即使没有类型声明，也可以通过编译。但是，从该模块输入的所有接口都将为any类型。</span>
</code></pre></div></li> <li><p>全局变量</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// declare global为 JavaScript 引擎的原生对象添加属性和方法</span>
<span class="token comment">// 如果文件有export {} ，文件就是作为模块，如果没有export，该文件就会作为全局的声明文件</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 空导出语句export {}，</span>
<span class="token comment">// 作用是强制编译器将这个脚本当作模块处理。这是因为declare global必须用在模块里面</span>
<span class="token keyword">declare</span> global <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
    <span class="token function">toSmallString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token comment">// 给window全局扩展myAppConfig属性</span>
  <span class="token keyword">interface</span> <span class="token class-name">window</span> <span class="token punctuation">{</span>
    myAppConfig<span class="token operator">:</span>object<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 正常String上是没有toSmallString方法的，扩展时候就可以使用了</span>
String<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toSmallString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> window<span class="token punctuation">.</span>myAppConfig<span class="token punctuation">;</span>
</code></pre></div></li></ol> <h2 id="ts运算符"><a href="#ts运算符" class="header-anchor">#</a> ts运算符</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token comment">// 不使用 Pick&lt;T, K&gt; ，实现 TS 内置的 Pick&lt;T, K&gt; 的功能</span>
  <span class="token keyword">interface</span> <span class="token class-name">Todo</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token builtin">string</span>
    description<span class="token operator">:</span> <span class="token builtin">string</span>
    completed<span class="token operator">:</span> <span class="token builtin">boolean</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token string">'title'</span> <span class="token operator">|</span> <span class="token string">'completed'</span>
  <span class="token comment">// 从类型 T 中选出符合 K 的属性，构造一个新的类型</span>
  <span class="token keyword">type</span> <span class="token class-name">MyPick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">type</span> <span class="token class-name">TodoPreview</span> <span class="token operator">=</span> MyPick<span class="token operator">&lt;</span>Todo<span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">&gt;</span>

  <span class="token keyword">const</span> todo<span class="token operator">:</span> TodoPreview <span class="token operator">=</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'Clean room'</span><span class="token punctuation">,</span>
      completed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol><li><p>keyof 是一个单目运算符，接受一个对象类型作为参数，返回该对象的所有键名组成的联合类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">type</span> <span class="token class-name">MyObj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    bar<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">type</span> <span class="token class-name">Keys</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> MyObj<span class="token punctuation">;</span> <span class="token comment">// 'foo'|'bar'</span>

  <span class="token comment">// 例子2</span>
  <span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">type</span> <span class="token class-name">KeyT</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">;</span> <span class="token comment">// 0 | 'a' | 'b'</span>

  <span class="token comment">// 由于 JavaScript 对象的键名只有三种类型，所以对于任意对象的键名的联合类型就是string|number|symbol</span>
  <span class="token keyword">type</span> <span class="token class-name">KeyT</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// string | number | symbol</span>

  <span class="token comment">// 对于没有自定义键名的类型使用 keyof 运算符，返回never类型，表示不可能有这样类型的键名</span>
  <span class="token keyword">type</span> <span class="token class-name">KeyT</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> object<span class="token punctuation">;</span>  <span class="token comment">// never，object类型没有自身的属性，也就没有键名</span>
</code></pre></div></li> <li><p>in：js中，in运算符用来确定对象是否包含某个属性名。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'a'</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'found a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>TypeScript 语言的类型运算中，in运算符有不同的用法，用来取出（遍历）联合类型的每一个成员类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">=</span> <span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'b'</span><span class="token operator">|</span><span class="token string">'c'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Prop <span class="token keyword">in</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  c<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>方括号也是运算符，方括号运算符（[]）用于取出对象的键值类型，比如T[K]会返回对象T的属性K的类型。</p> <ol><li>这里需要注意：方括号里面不能有值的运算</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 示例一</span>
 <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">'age'</span><span class="token punctuation">;</span>
 <span class="token keyword">type</span> <span class="token class-name">Age</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>

 <span class="token comment">// 示例二</span>
 <span class="token comment">// type Age = Person['a' + 'g' + 'e']; // 报错</span>
</code></pre></div></li> <li><p>extends...?: 条件运算符: ts 提供类似 js 的?:运算符这样的三元运算符，但多出了一个extends关键字。</p> <ol><li>条件运算符extends...?:可以根据当前类型是否符合某种条件，返回不同的类型。</li></ol> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 式子中的extends用来判断，类型T是否可以赋值给类型U，即T是否为U的子类型，</span>
<span class="token comment">// 这里的T和U可以是任意类型。</span>
<span class="token comment">// 如果T能够赋值给类型U，表达式的结果为类型X，否则结果为类型Y</span>
<span class="token comment">// T extends U ? X : Y</span>

<span class="token comment">// 1是number的子类型，所以返回true</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
 <span class="token function">live</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
 <span class="token function">woof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Dog是Animal的子类型，所以T1的类型是number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Dog <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token operator">?</span> <span class="token builtin">number</span> <span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token comment">// RegExp不是Animal的子类型，所以T2的类型是string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> RegExp <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token operator">?</span> <span class="token builtin">number</span> <span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token comment">// 如果需要判断的类型是一个联合类型，那么条件运算符会展开这个联合类型。</span>
<span class="token comment">// (A|B) extends U ? X : Y</span>
 <span class="token comment">// 等同于</span>
 <span class="token comment">// (A extends U ? X : Y) | (B extends U ? X : Y)</span>
</code></pre></div></li> <li><p>infer 关键字 用来定义泛型里面推断出来的类型参数，而不是外部传入的类型参数。
它通常跟条件运算符一起使用，用在extends关键字后面的父类型之中。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// Type extends Array&lt;infer Item&gt;表示，如果参数Type是一个数组，那么就将该数组的成员类型推断为Item，</span>
<span class="token comment">// 即Item是从Type推断出来的</span>
<span class="token comment">// 一旦使用Infer Item定义了Item，后面的代码就可以直接调用Item了</span>
<span class="token keyword">type</span> <span class="token class-name">Flatten<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token keyword">infer</span> Item<span class="token operator">&gt;</span></span> <span class="token operator">?</span> Item <span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name">Str</span> <span class="token operator">=</span> Flatten<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name">Num</span> <span class="token operator">=</span> Flatten<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// 如果不使用infer定义类型参数，那每次使用flatten就需要传入两个参数，比较麻烦</span>
<span class="token keyword">type</span> <span class="token class-name">Flatten<span class="token operator">&lt;</span>Type<span class="token punctuation">,</span> Item<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span>Item<span class="token operator">&gt;</span></span> <span class="token operator">?</span> Item <span class="token operator">:</span> Type<span class="token punctuation">;</span>

<span class="token comment">//使用infer，推断函数的参数类型和返回值类型</span>
<span class="token comment">// 如果T是函数，就返回这个函数的 Promise 版本，否则原样返回。</span>
<span class="token comment">// infer A表示该函数的参数类型为A，infer R表示该函数的返回值类型为R。</span>
<span class="token keyword">type</span> <span class="token class-name">ReturnPromise<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span>
    <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token comment">// 如果不使用infer，就不得不把ReturnPromise&lt;T&gt;写成ReturnPromise&lt;T, A, R&gt;，这样就很麻烦</span>

<span class="token comment">// 使用infer提取对象指定属性</span>
<span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">M</span><span class="token punctuation">,</span>
    b<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">N</span>
  <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">M</span><span class="token punctuation">,</span> <span class="token constant">N</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>

<span class="token comment">// 用法示例 infer提取了参数对象的属性a和属性b的类型</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> MyType<span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [string, number]</span>

<span class="token comment">// infer通过匹配字符串模板提取类型参数</span>
<span class="token keyword">type</span> <span class="token class-name">Str</span> <span class="token operator">=</span> <span class="token string">'foo-bar'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Bar</span> <span class="token operator">=</span> Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">infer</span> rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> rest <span class="token operator">:</span> <span class="token builtin">never</span> <span class="token comment">// 'bar'</span>
</code></pre></div></li> <li><p>is运算符用来描述返回值属于true还是false。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 函数返回布尔值的时候，可以使用is运算符，限定返回值与参数之间的关系。</span>
<span class="token comment">// 函数isFish()的返回值类型为pet is Fish，</span>
<span class="token comment">// 表示如果参数pet类型为Fish，则返回true，否则返回false</span>
<span class="token keyword">function</span> <span class="token function">isFish</span><span class="token punctuation">(</span>
  pet<span class="token operator">:</span> Fish<span class="token operator">|</span>Bird
<span class="token punctuation">)</span><span class="token operator">:</span>pet <span class="token keyword">is</span> Fish <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>pet <span class="token keyword">as</span> Fish<span class="token punctuation">)</span><span class="token punctuation">.</span>swim <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>模板字符串，ts允许使用模板字符串，构建类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">World</span> <span class="token operator">=</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;hello world&quot;</span>
<span class="token keyword">type</span> <span class="token class-name">Greeting</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>World<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 注意，模板字符串可以引用的类型一共6种，</span>
<span class="token comment">// 分别是 string、number、bigint、boolean、null、undefined。</span>
<span class="token comment">// 引用这6种以外的类型会报错</span>

<span class="token keyword">type</span> <span class="token class-name">Num</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Obj</span> <span class="token operator">=</span> <span class="token punctuation">{</span> n <span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> received</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// 正确</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Obj<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> received</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
</code></pre></div></li></ol> <h2 id="类型映射"><a href="#类型映射" class="header-anchor">#</a> 类型映射</h2> <p>映射（mapping）指的是，将一种类型按照映射规则，转换成另一种类型，通常用于对象类型。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 这两个类型的属性结构是一样的，但是属性的类型不一样。如果属性数量多的话，逐个写起来就很麻烦</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  bar<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  bar<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 使用类型映射，就可以从类型A得到类型B。</span>
<span class="token comment">/*
* [prop in keyof A]是一个属性名表达式，表示这里的属性名需要计算得到。具体的计算规则如下：
*   prop：属性名变量，名字可以随便起。
*   in：运算符，用来取出右侧的联合类型的每一个成员。
*   Keyof A：返回类型A的每一个属性名，组成一个联合类型。
* */</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>prop <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">A</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 结果</span>
<span class="token comment">// type B = {</span>
<span class="token comment">//   foo: string;</span>
<span class="token comment">//   bar: string;</span>
<span class="token comment">// }</span>

<span class="token comment">// 也可以复制A的原始类型</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>prop <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">A</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 结果</span>
<span class="token comment">// type B = {</span>
<span class="token comment">//   foo: number;</span>
<span class="token comment">//   bar: number;</span>
<span class="token comment">// }</span>

<span class="token comment">// 通过映射，可以修改对象的 可选、只读</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Prop <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">A</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">[</span>Prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 结果如下，其实 ts 的内置工具类型Partial&lt;T&gt;，就是这样实现的</span>
<span class="token comment">// type B = {</span>
<span class="token comment">//   a?: string | undefined;</span>
<span class="token comment">//   b?: number | undefined;</span>
<span class="token comment">// }</span>

<span class="token comment">// ts内置工具Readonly 实现如下</span>
<span class="token comment">// 将 T 的所有属性改为只读属性</span>
<span class="token keyword">type</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 用法如下</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">ReadonlyT</span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">//   readonly a: string;</span>
<span class="token comment">//   readonly b: number;</span>
<span class="token comment">// }</span>
</code></pre></div><h3 id="映射修饰符"><a href="#映射修饰符" class="header-anchor">#</a> 映射修饰符</h3> <p>映射会原样复制原始对象的可选属性和只读属性。如果要删改可选和只读这两个特性，并不是很方便。
为了解决这个问题，TypeScript 引入了两个映射修饰符，用来在映射时添加或移除某个属性的?修饰符和readonly修饰符。</p> <ul><li>+修饰符：写成+?或+readonly，为映射属性添加?修饰符或readonly修饰符。</li> <li>–修饰符：写成-?或-readonly，为映射属性移除?修饰符或readonly修饰符。</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 注意，+?或-?要写在属性名的后面</span>
<span class="token comment">// 添加可选属性 +?修饰符可以简写成?</span>
<span class="token keyword">type</span> <span class="token class-name">Optional<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Prop <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type<span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">?</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 移除可选属性</span>
<span class="token keyword">type</span> <span class="token class-name">Concrete<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Prop <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ts的工具类型Required&lt;T&gt;专门移除可选属性，就是使用-?修饰符实现的</span>

<span class="token comment">// +readonly和-readonly要写在属性名的前面</span>
<span class="token comment">// 添加 readonly +readonly修饰符可以简写成readonly</span>
<span class="token keyword">type</span> <span class="token class-name">CreateImmutable<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">+</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span>Prop <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type<span class="token punctuation">]</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 移除 readonly</span>
<span class="token keyword">type</span> <span class="token class-name">CreateMutable<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span>Prop <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type<span class="token punctuation">]</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 如果同时增删?和readonly这两个修饰符，写成下面这样</span>
<span class="token comment">// 增加</span>
<span class="token keyword">type</span> <span class="token class-name">MyObj<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">+</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 移除</span>
<span class="token keyword">type</span> <span class="token class-name">MyObj<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="键名重映射"><a href="#键名重映射" class="header-anchor">#</a> 键名重映射</h3> <p>TypeScript 4.1 引入了键名重映射（key remapping），允许改变键名。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  bar<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>p <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">A</span> <span class="token keyword">as</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ID</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  fooID<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  barID<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 属性过滤 键名重映射还可以过滤掉某些属性</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Filter<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span>
    <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">?</span> <span class="token constant">K</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">// 映射K in keyof T获取类型T的每一个属性以后，然后使用as Type修改键名</span>
<span class="token comment">// as T[K] extends string ? K : never]，使用了条件运算符。如果属性值T[K]的类型是字符串，那么属性名不变，否则属性名类型改为never，即这个属性名不存在</span>
<span class="token comment">// 只保留字符串属性</span>
<span class="token keyword">type</span> <span class="token class-name">FilteredUser</span> <span class="token operator">=</span> Filter<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span class="token comment">// { name: string }</span>
</code></pre></div><h2 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h2> <p>TypeScript支持内嵌，类型检查以及将JSX直接编译为JavaScript。想要使用JSX必须做两件事：</p> <ol><li>给文件一个.tsx扩展名</li> <li>启用jsx选项</li></ol> <p>需要注意的是TypeScript在.tsx文件里禁用了使用尖括号的类型断言。</p> <p>在jsx中我们可能会使用自定义标签或者自定义组件渲染，它们被称为固有元素，使用特殊的接口JSX.IntrinsicElements来查找。 默认如果这个IntrinsicElements接口没有指定，会全部通过，不对固有元素进行类型检查。然而，如果这个接口存在，那么固有元素的名字需要在JSX.IntrinsicElements接口的属性里查找。 例如：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">namespace</span> <span class="token constant">JSX</span> <span class="token punctuation">{</span>
    <span class="token keyword">interface</span> <span class="token class-name">IntrinsicElements</span> <span class="token punctuation">{</span>
        foo<span class="token operator">:</span> <span class="token builtin">any</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// &lt;foo /&gt;没有问题，但是&lt;bar /&gt;会报错，因为它没在JSX.IntrinsicElements里指定</span>
<span class="token operator">&lt;</span>foo <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 正确</span>
<span class="token operator">&lt;</span>bar <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 错误</span>
<span class="token comment">// 当然也可以在JSX.IntrinsicElements上指定一个用来捕获所有字符串索引</span>
<span class="token comment">// declare namespace JSX {</span>
<span class="token comment">//     interface IntrinsicElements {</span>
<span class="token comment">//         [elemName: string]: any;</span>
<span class="token comment">//     }</span>
<span class="token comment">// }</span>

<span class="token comment">// 上面 foo: any表示 组件foo接收任何类型的参数，如果想明确参数类型，需要如下定义：</span>
<span class="token keyword">declare</span> <span class="token keyword">namespace</span> <span class="token constant">JSX</span> <span class="token punctuation">{</span>
    <span class="token keyword">interface</span> <span class="token class-name">IntrinsicElements</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token punctuation">{</span> bar<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// `foo`的元素属性类型为`{bar?: boolean}`</span>
<span class="token operator">&lt;</span>foo bar <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="无状态函数组件"><a href="#无状态函数组件" class="header-anchor">#</a> 无状态函数组件</h3> <p>正如其名，组件被定义成JavaScript函数，它的第一个参数是props对象。 TypeScript会强制它的返回值可以赋值给JSX.Element。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">FooProp</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token constant">X</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token constant">Y</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">AnotherComponent</span><span class="token punctuation">(</span>prop<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">ComponentFoo</span><span class="token punctuation">(</span>prop<span class="token operator">:</span> FooProp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>AnotherComponent name<span class="token operator">=</span><span class="token punctuation">{</span>prop<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Button</span> <span class="token operator">=</span> <span class="token punctuation">(</span>prop<span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">,</span> context<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>

<span class="token comment">// 由于无状态函数组件是简单的JavaScript函数，所以我们还可以利用函数重载。</span>
<span class="token keyword">interface</span> <span class="token class-name">ClickableProps</span> <span class="token punctuation">{</span>
    children<span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">HomeProps</span> <span class="token keyword">extends</span> <span class="token class-name">ClickableProps</span> <span class="token punctuation">{</span>
    home<span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">SideProps</span> <span class="token keyword">extends</span> <span class="token class-name">ClickableProps</span> <span class="token punctuation">{</span>
    side<span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">MainButton</span><span class="token punctuation">(</span>prop<span class="token operator">:</span> HomeProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">MainButton</span><span class="token punctuation">(</span>prop<span class="token operator">:</span> SideProps<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ts内置的类型工具"><a href="#ts内置的类型工具" class="header-anchor">#</a> TS内置的类型工具</h2> <ol><li><p>Awaited &lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 用来取出 Promise 的返回值类型，适合用在描述then()方法和 await 命令的参数类型。</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> Awaited<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string</span>

<span class="token comment">// 可以返回多重 Promise 的返回值类型</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Awaited<span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;&gt;&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number</span>

<span class="token comment">// 如果它的类型参数不是 Promise 类型，那么就会原样返回</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> Awaited<span class="token operator">&lt;</span><span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number | boolean</span>
</code></pre></div></li> <li><p>ConstructorParameters&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 提取构造方法Type的参数类型，组成一个元组类型返回。</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> ConstructorParameters<span class="token operator">&lt;</span>
 <span class="token keyword">new</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> object
 <span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [x: string, y: number]</span>

 <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> ConstructorParameters<span class="token operator">&lt;</span>
 <span class="token keyword">new</span> <span class="token punctuation">(</span>x<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> object
 <span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [x?: string | undefined]</span>
</code></pre></div></li> <li><p>Exclude&lt;UnionType, ExcludedMembers&gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 用来从联合类型UnionType里面，删除某些类型ExcludedMembers，组成一个新的类型返回</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'b'</span><span class="token operator">|</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'b'|'c'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'b'</span><span class="token operator">|</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'b'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'c'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">Function</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T4</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T5</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token builtin">Function</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T6</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token number">200</span> <span class="token operator">|</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">200</span> <span class="token operator">|</span> <span class="token number">201</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 400</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T7</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
</code></pre></div></li> <li><p>Extract&lt;Type, Union&gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 用来从联合类型UnionType之中，提取指定类型Union，组成一个新类型返回。它与Exclude&lt;T, U&gt;正好相反</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'b'</span><span class="token operator">|</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'a'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'b'</span><span class="token operator">|</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'b'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'a'|'b'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'b'</span><span class="token operator">|</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token operator">|</span><span class="token string">'d'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 'a'</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T4</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string[]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T5</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token builtin">Function</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// () =&gt; void</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T6</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token number">200</span> <span class="token operator">|</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">200</span> <span class="token operator">|</span> <span class="token number">201</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// 200</span>
</code></pre></div></li> <li><p>InstanceType&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 提取构造函数的返回值的类型（即实例类型），参数Type是一个构造函数，等同于构造函数的ReturnType&lt;Type&gt;。</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span>
 <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> object
<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// object</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span>ErrorConstructor<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// Error</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span>FunctionConstructor<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// Function</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span>RegExpConstructor<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// RegExp</span>
</code></pre></div></li> <li><p>NonNullable&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 用来从联合类型Type删除null类型和undefined类型，组成一个新类型返回，也就是返回Type的非空类型版本。</span>
<span class="token comment">// string|number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// string[]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token keyword">null</span><span class="token operator">|</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// boolean</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T4</span></span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">|</span><span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T5</span></span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T6</span></span> <span class="token operator">=</span> NonNullable<span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">|</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// never</span>
</code></pre></div></li> <li><p>Omit&lt;Type, Keys&gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 用来从对象类型Type中，删除指定的属性Keys，组成一个新的对象类型返回。</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>       <span class="token comment">// { y: number }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>       <span class="token comment">// { x: number }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token string">'x'</span> <span class="token operator">|</span> <span class="token string">'y'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { }</span>
</code></pre></div></li> <li><p>OmitThisParameter&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 从函数类型中移除 this 参数</span>
<span class="token keyword">function</span> <span class="token function">toHex</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> Number<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> OmitThisParameter<span class="token operator">&lt;</span><span class="token keyword">typeof</span> toHex<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// () =&gt; string</span>
</code></pre></div></li> <li><p>Parameters&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 从函数类型Type里面提取参数类型，组成一个元组返回。</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;</span><span class="token punctuation">(</span>s<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [s:string]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>    <span class="token comment">// [arg: unknown]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T4</span></span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;</span>
<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [x: { a: number, b: string }]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T5</span></span> <span class="token operator">=</span> Parameters<span class="token operator">&lt;</span>
<span class="token punctuation">(</span>a<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span> b<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// [a:number, b:number]</span>
</code></pre></div></li> <li><p>Partial&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 返回一个新类型，将参数类型Type的所有属性变为可选属性。</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Partial<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { x?: number; y?: number; }</span>
</code></pre></div></li> <li><p>Pick&lt;Type, Keys&gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 返回一个新的对象类型，第一个参数Type是一个对象类型，第二个参数Keys是Type里面被选定的键名。</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { x: number }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { y: number }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token operator">|</span><span class="token string">'y'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token comment">// { x: number; y: number }</span>
</code></pre></div></li> <li><p>Readonly&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 返回一个新类型，将参数类型Type的所有属性变为只读属性。</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// { readonly x: number; readonly y?: number; }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Readonly<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Record&lt;Keys, Type&gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 返回一个对象类型，参数Keys用作键名，参数Type用作键值类型。</span>
<span class="token comment">// { a: number }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Record<span class="token operator">&lt;</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Required&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 返回一个新类型，将参数类型Type的所有属性变为必选属性。它与Partial&lt;Type&gt;的作用正好相反</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
  x<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> Required<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { x: number; y: number; }</span>
</code></pre></div></li> <li><p>ReadonlyArray&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 用来生成一个只读数组类型，类型参数Type表示数组成员的类型。</span>
<span class="token keyword">const</span> values<span class="token operator">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'x'</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
values<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
values<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
</code></pre></div></li> <li><p>ReturnType&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 提取函数类型Type的返回值类型，作为一个新类型返回</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// { a: string; b: number }</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T3</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span>s<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// void</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T4</span></span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ReturnType</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// () =&gt; any[]</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T5</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> Math<span class="token punctuation">.</span>random<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T6</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> <span class="token builtin">Array</span><span class="token punctuation">.</span>isArray<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// boolean</span>
</code></pre></div></li> <li><p>ThisParameterType&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 提取函数类型中this参数的类型。</span>
<span class="token keyword">function</span> <span class="token function">toHex</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> Number<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T</span></span> <span class="token operator">=</span> ThisParameterType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> toHex<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
</code></pre></div></li> <li><p>ThisType&lt; Type &gt;</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 不返回类型，只用来跟其他类型组成交叉类型，用来提示 TypeScript 其他类型里面的this的类型。</span>
<span class="token keyword">interface</span> <span class="token class-name">HelperThisValue</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">logError</span><span class="token operator">:</span> <span class="token punctuation">(</span>error<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> helperFunctions<span class="token operator">:</span>
<span class="token punctuation">{</span> <span class="token punctuation">[</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">Function</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span>
ThisType<span class="token operator">&lt;</span>HelperThisValue<span class="token operator">&gt;</span>
<span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">logError</span><span class="token punctuation">(</span><span class="token string">&quot;Error: Something wrong!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正确</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>字符串类型工具</p> <ol><li><p><code>Uppercase&lt;StringType&gt;</code></p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 将字符串类型的每个字符转为大写。</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;HELLO&quot;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token operator">=</span> Uppercase<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>Lowercase&lt;StringType&gt;</code> 将字符串的每个字符转为小写</p></li> <li><p><code>Capitalize&lt;StringType&gt;</code> 将字符串的第一个字符转为大写。</p></li> <li><p><code>Uncapitalize&lt;StringType&gt;</code> 将字符串的第一个字符转为小写。</p></li></ol></li></ol> <h2 id="注释指令"><a href="#注释指令" class="header-anchor">#</a> 注释指令</h2> <p>所谓“注释指令”，指的是采用 JS 双斜杠注释的形式，向编译器发出的命令。</p> <ol><li><p>@ts-nocheck
告诉编译器不对当前脚本进行类型检查，可以用于 TypeScript 脚本，也可以用于 JavaScript 脚本</p></li> <li><p>@ts-check
如果一个 JavaScript 脚本顶部添加了// @ts-check，那么编译器将对该脚本进行类型检查，不论是否启用了checkJs编译选项。</p></li> <li><p>@ts-ignore
诉编译器不对下一行代码进行类型检查，可以用于 TypeScript 脚本，也可以用于 JavaScript 脚本</p></li> <li><p>@ts-expect-error</p></li> <li><p>JSDoc：TypeScript 直接处理 JS 文件时，如果无法推断出类型，会使用 JS 脚本里面的 JSDoc 注释。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// JSDoc 注释必须以/**开始，其中星号（*）的数量必须为两个。</span>
<span class="token comment">// 若使用其他形式的多行注释，则 JSDoc 会忽略该条注释。</span>
<span class="token comment">// JSDoc 注释必须与它描述的代码处于相邻的位置，并且注释在上，代码在下</span>
<span class="token comment">/**
 * @param {string} [somebody='1']
 */</span>
<span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span>somebody<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello '</span> <span class="token operator">+</span> somebody<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>@typedef命令创建自定义类型，等同于 TypeScript 里面的类型别名。 @typedef {(number | string)} NumberLike</li> <li>@type命令定义变量的类型。
<ol><li>@type {string}</li> <li>@type {(s: string, b: boolean) =&gt; number}允许使用 TypeScript 类型及其语法</li></ol></li> <li>@param命令用于定义函数参数的类型。方括号里面，还可以指定参数默认值：@param {string} [x=&quot;bar&quot;]</li> <li>@return和@returns命令的作用相同，指定函数返回值的类型。</li> <li>@extends命令用于定义继承的基类。</li></ol></li></ol> <h2 id="tsconfig-json"><a href="#tsconfig-json" class="header-anchor">#</a> tsconfig.json</h2> <p>如果一个目录下存在一个tsconfig.json文件，那么它意味着这个目录是TypeScript项目的根目录。 tsconfig.json文件中指定了用来编译这个项目的根文件和编译选项。
&quot;files&quot;指定一个包含相对或绝对文件路径的列表。 &quot;include&quot;和&quot;exclude&quot;属性指定一个文件glob匹配模式列表。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;system&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定生成哪个模块系统代码： &quot;None&quot;， &quot;CommonJS&quot;， &quot;AMD&quot;， &quot;System&quot;， &quot;UMD&quot;， &quot;ES6&quot;或 &quot;ES2015&quot;。</span>
        <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 在表达式和声明上有隐含的 any类型时报错。</span>
        <span class="token property">&quot;removeComments&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 删除所有注释，除了以 /!*开头的版权信息。</span>
        <span class="token property">&quot;preserveConstEnums&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 保留 const和 enum声明。</span>
        <span class="token property">&quot;outFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;../../built/local/tsc.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 将输出文件合并为一个文件。</span>
        <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 生成相应的 .map文件。</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;core.ts&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;sys.ts&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/**/*&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;**/*.spec.ts&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="lib-d-ts"><a href="#lib-d-ts" class="header-anchor">#</a> lib.d.ts</h2> <p>安装 TypeScript 时，会顺带安装一个 lib.d.ts 声明文件。这个文件包含 JavaScript 运行时以及 DOM 中存在各种常见的环境声明。</p> <ul><li>它自动包含在 TypeScript 项目的编译上下文中；</li> <li>它能让你快速开始书写经过类型检查的 JavaScript 代码。</li></ul> <p>lib.d.ts 的内容主要是一些变量声明（如：window、document、math）和一些类似的接口声明（如：Window、Document、Math）。eg：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Window</span>
  <span class="token keyword">extends</span> <span class="token class-name">EventTarget</span><span class="token punctuation">,</span>
    WindowTimers<span class="token punctuation">,</span>
    WindowSessionStorage<span class="token punctuation">,</span>
    WindowLocalStorage<span class="token punctuation">,</span>
    WindowConsole<span class="token punctuation">,</span>
    GlobalEventHandlers<span class="token punctuation">,</span>
    IDBEnvironment<span class="token punctuation">,</span>
    WindowBase64 <span class="token punctuation">{</span>
  animationStartTime<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  applicationCache<span class="token operator">:</span> ApplicationCache<span class="token punctuation">;</span>
  clientInformation<span class="token operator">:</span> Navigator<span class="token punctuation">;</span>
  closed<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  crypto<span class="token operator">:</span> Crypto<span class="token punctuation">;</span>
  <span class="token comment">// so on and so forth...</span>
<span class="token punctuation">}</span>
<span class="token keyword">declare</span> <span class="token keyword">var</span> window<span class="token operator">:</span> Window<span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/vuePress/assets/js/app.6d60d073.js" defer></script><script src="/vuePress/assets/js/2.b3f14533.js" defer></script><script src="/vuePress/assets/js/1.9a56ce6b.js" defer></script><script src="/vuePress/assets/js/29.932303ce.js" defer></script>
  </body>
</html>
